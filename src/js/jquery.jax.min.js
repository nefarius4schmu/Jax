/**
 * JAX v1.1.0
 * Copyright 2015 Steffen Lange
 * Licensed under the MIT license
 */
!function(e,g){if("undefined"!==typeof e)g(e);else throw Error("Jax requires jQuery");}(jQuery,function(e){var g=e(window),f=[];g.scroll(function(){e.each(f,function(b,a){a&&!a.isInViewport.call(a,a.options.lazyOffset)&&("bs.tab.lazy"===a.jax?a.MODES["bs.tab"].call(a):(a.$element.data("jaxLazyLoaded",!0),a.ajax()),f.splice(b,1))})});var d=function(b,a,c){this.element=b;this.$element=e(b);this.options=a;this.ajaxOptions=a.ajaxOptions||{};this.settings={};this.state={loading:!1,loaded:!1,error:!1};
c=c||a.jaxCallback||a.callback;switch(typeof c){case "string":"function"===typeof window[c]&&(this.callback=window[c]);break;case "function":this.callback=c;break;default:throw Error("Jax-Error: failed to init callback");}if(c=a.jaxMethod||a.method)this.settings.method=c;else throw Error("Jax-Error: missing ajax method");if(c=a.jaxUrl||a.url)this.settings.url=c;else throw Error("Jax-Error: missing ajax url");this.settings.data=a.jaxData||a.data||{};c=a.jaxParse||a.parse;var h=typeof c;if("string"===
h&&d.PARSER[c])this.parser=d.PARSER[c].bind(this);else if("function"===h)this.parser=this.customParser(c);else throw Error("Jax-Error: unknown parser");this.options.afterCall={set:1==a.set||"set"===a.jaxAfter||"set"===a.after,append:1==a.append||"append"===a.jaxAfter||"append"===a.after,prepend:1==a.prepend||"prepend"===a.jaxAfter||"prepend"===a.after,replace:1==a.replace||"replace"===a.jaxAfter||"replace"===a.after};this.target=c=a.jaxTarget||a.target||b;this.$target=e(c);this.settings.loading=a.jaxLoading||
a.loading||!1;this.settings.loaded=a.jaxLoaded||a.loaded||!1;this.settings.error=a.jaxError||a.error||!1;this.$loader=e(a.jaxLoader||a.loader||(a.loadOnTarget?this.$target:this.$element));this.settings.event=a.jaxEvent||a.event||!1;c=a.jax||a.mode||a.autoMode;if("string"===typeof c&&d.MODES[c])d.MODES[c].call(this);else throw Error("failed to init jax, unknown mode");};d.VERSION="1.0.0";d._={noop:function(){}};d.DEFAULTS={method:"get",parse:"html",loading:"loading",loaded:"loaded",error:"error",autoMode:"load",
loadOnTarget:!0,once:!0,abortOnRecall:!0,lazyOffset:!1,ajaxDelay:50,callback:d._.noop,parseBoolValid:"0|1|true|false",parseBoolTrue:"0|true"};d.MODES={call:function(){this.ajax()},load:function(){this.ajax({set:!0})},append:function(){this.ajax({append:!0})},prepend:function(){this.ajax({prepend:!0})},replace:function(){this.ajax({replace:!0})},click:function(){var b=this;b.$element.on("click",function(a){a.preventDefault();b.ajax()})},event:function(){var b=this;if(!b.options.event)throw Error("Jax-Error: missing event type");
b.$element.on(b.options.event,function(a){console.log("event fired",b.options.event);b.ajax()})},lazy:function(){this.isInViewport(this.options.lazyOffset)?f[f.length]=this:(this.$element.data("jaxLazyLoaded",!0),this.ajax())},"bs.tab":function(){var b=this,a=b.$element;if(0===e(a.attr("href")).length)throw Error("failed to init jax bs.tab event");if(a.parent().hasClass("active"))a.data("jaxBsTabLoaded",!0),b.ajax();else a.on("shown.bs.tab",function(a){a=e(a.target);if(a.data("jaxBsTabLoaded"))return!1;
a.data("jaxBsTabLoaded",!0);b.ajax()})},"bs.tab.lazy":function(){this.isInViewport(this.options.lazyOffset)?f[f.length]=this:d.MODES["bs.tab"].call(this)}};d.PARSER={bool:function(b){var a=!!b.match(new RegExp("^"+this.options.parseBoolValid+"$","i"));return{value:a?!!b.match(new RegExp("^"+this.options.parseBoolTrue+"$","i")):null,valid:a,raw:b}},"int":function(b){var a=parseInt(b);return{value:a,valid:!isNaN(a),raw:b}},"float":function(b){var a=parseFloat(b);return{value:a,valid:!isNaN(a),raw:b}},
html:function(b){var a="undefined"!==typeof b&&null!=b;return{value:a?b:null,valid:a,raw:b}},json:function(b){var a=!0,c;try{c=e.parseJSON(b)}catch(d){c=null,a=!1}return{value:c,valid:a,raw:b}}};d.prototype.customParser=function(b){return function(a){var c=b(a);return{value:c,valid:"undefined"!==typeof c,raw:a}}};d.prototype.ajax=function(b){b=b||{};var a=this,c=a.options.ajaxDelay||0,d=a.$loader.data("jaxXHR"),f=e.extend({},this.ajaxOptions,{method:a.settings.method,url:a.settings.url,data:a.settings.data});
a.isLoaded()&&a.options.once||(d&&a.isLoading()&&a.options.abortOnRecall&&d.abort(),a.error(!1),a.loaded(!1),a.loading(!0),setTimeout(function(){a.$loader.data("jaxXHR",e.ajax(f).done(function(c){a.response({success:!0,content:a.parser(c),data:f},b)}).fail(function(c,d,e){"abort"!==d&&(a.error(!0),a.response({success:!1,data:f,message:e},b))}).always(function(){a.loading(!1);a.loaded(!0);a.$loader.removeData("jaxXHR")}))},c))};d.prototype.response=function(b,a){var c=this.options.afterCall;b.success&&
b.content.valid&&(a.set||c.set?this.$target.html(b.content.value):a.append||c.append?this.$target.append(b.content.value):a.prepend||c.prepend?this.$target.prepend(b.content.value):(a.replace||c.replace)&&this.$target.replaceWith(b.content.value));this.callback.call(this.target,b)};d.prototype.loading=function(b){this.state.loading="boolean"===typeof b?b:!this.isLoading();"string"===typeof this.settings.loading&&this.$loader.toggleClass(this.settings.loading,b)};d.prototype.loaded=function(b){this.state.loaded=
"boolean"===typeof b?b:!this.isLoaded();"string"===typeof this.settings.loaded&&this.$loader.toggleClass(this.settings.loaded,b)};d.prototype.error=function(b){this.state.error="boolean"===typeof b?b:!this.isError();"string"===typeof this.settings.error&&this.$loader.toggleClass(this.settings.error,b)};d.prototype.isLoading=function(){return this.state.loading};d.prototype.isLoaded=function(){return this.state.loaded};d.prototype.isError=function(){return this.state.error};d.prototype.isInViewport=
function(b){b=b||0;return g.height()+g.scrollTop()+b<=this.$element.offset().top};var k=e.fn.jax;e.fn.jax=function(b,a){return this.each(function(){var c=e(this).data(),f=e.extend({},d.DEFAULTS,c,"object"==typeof b&&b);"object"!==typeof c.jax&&e.data(this,"jax",new d(this,f,a))})};e.fn.jax.Constructor=d;e.fn.jax.noConflict=function(){e.fn.jax=k;return this};e(document).ready(function(){e(this).find("[data-jax]").jax()})});
